***Create group with uniq ID 1050
sudo groupadd -g 1050 bmirrakhimov_group
***Create userd with specific ID and and to existing group
sudo useradd bmirrakhimov -u 1040 -g 1050 -d /home/bmirrakhimov_home -s /bin/bash
***Add user to 24(CDROM) group
sudo usermod -aG 24 bmirrakhimov
***Add password to the new created user
sudo passwd bmirrakhimov

***Connect to VM using SSH key as nsurname
ssh-keygen -C "epam-vm" -t rsa -b 4096
***Give new directory and name
/home/ubuntu/.ssh/bmirrakhimov.pem
***Change the config file on remote VM
sudo vim /etc/ssh/sshd_config
sudo service sshd reload
Replace PasswordAuthentication no to PasswordAuthentication yes
***Copy pub key to remote vm
ssh-copy-id -i ~/.ssh/bmirrakhimov.pem.pub bmirrakhimov@172.17.91.44

***Login to host
ssh -i ~/.ssh/bmirrakhimov.pem/ bmirrakhimov@172.17.91.44
***Change the config file on remote VM
sudo vim /etc/ssh/sshd_config
Replace PasswordAuthentication yes to PasswordAuthentication no
***Create user jump for jumphost
sudo useradd -m -s /bin/bash -c "jump server" jump
*** Change password for new user
sudo passwd epam2
***Create jumhost config file
### First jump host. Directly reachable
Host jumpohost
  HostName 172.17.84.194
  User jump
  Port 22

### Host to jump to via jumphost1.example.org
Host epam2
  HostName 172.17.80.176
  User epam2
  ProxyJump jumpohost


***Sudo Rights
***Take backup of config file
cp /etc/sudoers /root/sudoers.bak
***Edit file
sudo visudo /etc/sudoers
***Add
bmirrakhimov ALL = NOPASSWD: /usr/bin/apt , /usr/bin/apt-get , PASSWD: /usr/bin/apt update , /usr/bin/apt-get update
***Reset group
sudo newgrp
cp /etc/sudoers /root/sudoers.bak

***Create a physical volume 
pvcreate /dev/sdb
pvdisplay
sudo pvscan
***Create a volume group nsurname
sudo vgcreate bmirrakhimov /dev/sdb
***Create a logical volume nsurname: size: 50% of free space
sudo lvcreate bmirrakhimov -l 50%VG -n bmirrakhimov
lvdisplay
***Create file system: ext4
sudo mkfs.ext4 /dev/bmirrakhimov/bmirrakhimov
***Mount the logical volume to /lvm/ directory (permanently)
sudo mkdir -p /lvm/
sudo mount /dev/bmirrakhimov/bmirrakhimov /lvm


***nstall Docker using the Docker repository:version: 19.03.15
sudo apt-get update
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg    
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
  apt-cache madison docker-ce
sudo apt-get install docker-ce=5:19.03.15~3-0~ubuntu-focal docker-ce-cli=5:19.03.15~3-0~ubuntu-focal
sudo service --status-all
sudo service docker start
sudo docker run hello-world


***Mount NFS
sudo mount -t nfs 10.253.218.235:/mnt /share
***permanent mount
10.253.218.235:/share       /mnt  nfs  defaults 0  0
sudo mount /mnt
sudo mount 10.253.218.235:/share


***Dockerfile with Centos8 and yum update and java install
ARG CENTOS_IMAGE
FROM ${CENTOS_IMAGE}
ARG JAVA_VERSION=11
RUN source /etc/os-release && \
    if [ "$VERSION" == "8" ]; then \
     curl https://vault.centos.org/centos/8/BaseOS/x86_64/os/Packages/centos-gpg-keys-8-3.el8.noarch.rpm -o tmp/centos-gpg-keys-8-3.el8.noarch.rpm; \
     rpm -i /tmp/centos-gpg-keys-8-3.el8.noarch.rpm; \
     dnf --disablerepo '*' --enablerepo=extras swap centos-linux-repos centos-stream-repos -y; \
     yum update -y; \
    fi
RUN yum install java-$JAVA_VERSION-openjdk -y;


*** Docker Centos7 and Nginx

FROM centos:centos7
LABEL maintainer="Vicente Zepeda <chente.z.m@gmail.com>"

ENV nginxversion="1.14.0-1" \
    os="centos" \
    osversion="7" \
    elversion="7_4"

RUN yum install -y wget openssl sed &&\
    yum -y autoremove &&\
    yum clean all &&\
    wget http://nginx.org/packages/$os/$osversion/x86_64/RPMS/nginx-$nginxversion.el$elversion.ngx.x86_64.rpm &&\
    rpm -iv nginx-$nginxversion.el$elversion.ngx.x86_64.rpm

COPY nginx.conf /etc/nginx/nginx.conf
COPY index.html /data/www/index.html
VOLUME [ "/data/www" ]
EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]



===============================================

Guess docker run parameters so that:

$ docker run ...
$ docker exec -it box sh
/data $ id
uid=1000 gid=550 groups=1200
/data $ echo $STUDENT
bmirrakhimov
/data $ ps -ef
PID   USER     TIME  COMMAND
    1 1000      0:00 sleep infinity
    6 1000      0:00 sh
   13 1000      0:00 ps -ef
/data $ exit


docker run -d --rm --name box -w /data -e STUDENT=bmirrakhimov -u 1000:550 --group-add 1200 0ac33e5f5afa sleep infinity

docker container prune -f

docker exec -it box sh

docker container stop $(docker container ls -aq)

apt-get update && apt-get install -y procps

====================================================================================================================
